{% extends 'base.html.twig' %}

{% block title %}Bienvenue sur ChqrgePower{% endblock %}

{% block main %}
<main>
    <div class="column" id="container1">
          <!-- zone de connexion -->
        <div class='ml-2 myform'>
          <form action="verification.php" method="POST">
            <h2>Connexion</h2>
            <label><b>Nom d'utilisateur</b></label>
            <input type="text" placeholder="Entrer le nom d'utilisateur" name="username" required>

            <label><b>Mot de passe</b></label>
            <input type="password" placeholder="Entrer le mot de passe" name="password" required>

            <input type="submit" id='submit' value='SE CONNECTER' >
           </form>
        </div>
    </div>
    <div class="column shadow" id="col2">
        <h1>Charger votre voiture électrique n'importe ou avec nous</h1>
        <h3>Trouver des bornes pres de chez vous et apprennez-en plus sur votre consomation grace à notre application</h3>
    </div>
    <div class="bottom text-center mb-5">
      <a href="{{ path('client') }}" class="sm-text mx-auto mb-3">
        <button class="btn btn-white ml-2">Créez votre compte</button>
      </a>
    </div>
</main>
<div id="maCarte" data-station="{{ station|json_encode|e('html_attr') }}"></div>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="crossorigin=""></script>

  <script type="text/javascript">
      mystation = document.getElementById('maCarte').dataset.station;
      stations = JSON.parse(mystation);
      var carte = L.map('maCarte').setView([46.227638, 2.213749], 6);
      L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
        attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
        minZoom: 1,
        maxZoom: 20
      }).addTo(carte);

      var i=0;
      var marker = [];
      for (let station in stations) {
        s = JSON.parse(stations[station])
        console.log(s);
        marker[i] = L.marker([s.positionx, s.positiony]).addTo(carte);
        marker[i].bindPopup("Nbre de bornes: "+s.Nb_bornes+"<br>Adresse: "+s.adresse_station);
        i++;
      }
  </script>
{% endblock %}


